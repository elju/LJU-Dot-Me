// Central stylesheet for Luke Underwood's (elju's) personal site.
// url:  http://elju.me


@import 'main.css';
@import 'basic.less';
@import 'navbar.less';
@import 'art.less';
@import 'code.less';
@import 'other.less';
@import 'blog.less';
@import 'mixins.less';

@stretch: 1;
@stretchPer: percentage(@stretch);
@skewAngle: 0deg;
@amount-to-right: 0%;
@subwindow-offset: ((@amount-to-right)*-1);

h1 {
    text-shadow: 0 1px 3px rgba(0,0,0,0.4), 0 0 30px rgba(0,0,0,0.075);
}

#help {
    position: absolute;
    font-size: 40pt;
    opacity: 1;
    top: 40%;
    left: -3%;
    width: 103%;
    -webkit-transition: opacity 2s;
    -moz-transition: opacity 2s;
    -ms-transition: opacity 2s;
    transition: opacity 2s;
    z-index: 1000;
}

* {
    padding: 0;
    margin: 0;
}

.container-fluid {
    margin: 0px 10px;
}

.slice:hover {
    box-shadow: inset 0 0 10px 0 rgba(255,255,255,0.2);
}

.go .slice:hover {
    box-shadow: none;
}

//  I set up the warp mesh first and then place the
//  subwindows inside of it.  The warp mesh itself is
//  200% of the screen and scooted over 17% to the left
//  @amount-to-right. All of this happens within the
//  .transformtranslate() mixin in mixins.less.
//  Order of operations on the transformations matters,
//  and winds up being super important to keep track of.

#one:hover {
    // background: spin(@firstcolor, 180);
    background: rgb(250,250,250);
}
#two:hover {
    // background: spin(@secondcolor, 180);
    background: rgb(250,250,250);
}
#three:hover {
    // background: spin(@thirdcolor, 180);
    background: rgb(250,250,250);
}
#four:hover {
    // background: spin(@fourthcolor, 180);
    background: rgb(250,250,250);
}

#warp {
    position: relative;
    height: 100%;
    .transorig;
    .transition(0.8s);
    .transformtranslate((@amount-to-right),((-1)*@skewAngle), @stretch); //shift left, skew in the reverse of the variable, and stretch by 2
    > .slice {
        // border-left: solid #222 1pt;
        // border-right: solid #222 1pt;
        cursor: pointer;
        position: relative; // this fixes a webkit bug where it can't see anchor elements otherwise.
        overflow: hidden; // fixes a chrome bug where it was saying #two was like 15,000 px.
        height: 100%;
        width: 24.999%;
        float: left;
        -webkit-transition: background 0.1s, -webkit-transform 0.8s;
        -moz-transition: background 0.1s, -moz-transform 0.8s;
        -ms-transition: background 0.1s, transform 0.8s;
        -o-transition: background 0.1s, transform 0.8s;
        transition: background 0.1s, transfrom 0.8s;
        .transorig; // this makes the animations work smoothly and not be all fucked up on webkit
                    // for some reason you have to include it even though it's not animated.
        // .transformtranslate(0px, 0deg, 1);
    }
}

.spacer {
    position: absolute;
    cursor: default;
    height: 100%;
    z-index: 10000;
    @wid1: 0.0855;
    @wid2: 0.0855;
    @wid3: 0.0855;
    opacity: 1;
    background: #EEE;
    @topacity: 0.3s;
    -webkit-transition: opacity (@topacity), -webkit-transform 0.8s;
    -moz-transition: opacity (@topacity), -moz-transform 0.8s;
    -ms-transition: opacity (@topacity), transform 0.8s;
    -o-transition: opacity (@topacity), transform 0.8s;
    transition: opacity (@topacity), transfrom 0.8s;
    &#afterOne {
        // background: mix(@firstcolornav, @secondcolornav);
        left: percentage(.25 - @wid1 / 2);
        width: percentage(@wid1);
    }
    &#afterTwo {
        // background: saturate(mix(@secondcolornav, @thirdcolornav), 10%);
        left: percentage(.50 - @wid2 / 2);
        width: percentage(@wid2);
    }
    &#afterThree {
        // background: mix(@thirdcolornav, @fourthcolornav);
        left: percentage(.75 - @wid3 / 2);
        width: percentage(@wid3);
    }

}

.subwindow {
    overflow-y: auto; // strange bug? in browsers where it messes up placement, but only until clicked w/out this change.
    position: absolute;
    width: 400%;
    height: 100%;

    .transition(0.8s);
    .transorig;

    > div {
        margin-top: 0px;
    }
}

/* We care which slice we're in, because we have to translateX each subwindo back to the viewport a different amount. */ 

#warp {
    #one .subwindow {
        .transformtranslaterev((@subwindow-offset), @skewAngle, (1/@stretch));
    }

    #two .subwindow {
        .transformtranslaterev((@subwindow-offset) - 25%, @skewAngle, (1/@stretch));
    }

    #three .subwindow {
        .transformtranslaterev((@subwindow-offset) - 50%, @skewAngle, ((1/@stretch) - 0.00003));
    }

    #four .subwindow {
        .transformtranslaterev((@subwindow-offset) - 75%, @skewAngle, (1/@stretch));
    }
}


#warp.go {
    &.goone {
        .transformtranslate(0%, 0, 4.0001);
    }
    &.gotwo {
        .transformtranslate(-25.04%, 0, 4.0001);
    }
    &.gothree {
        .transformtranslate(-50.04%, 0, 4.01);
    }
    &.gofour {
        .transformtranslate(-75.04%, 0, 4.0001);
    }

    #one .subwindow,
    #two .subwindow,
    #three .subwindow,
    #four .subwindow {
        .transformtranslate(0%, 0deg, 0.25);
    }

    > .slice {
        overflow-x: none; // this continues correcting for the Webkit browser glitch.
        width: 25%;
        // border: solid transparent 0px;
        -webkit-transition: background 0.3s, -webkit-transform 0.8s;
        -moz-transition: background 0.3s, -moz-transform 0.8s;
        -ms-transition: background 0.3s, transform 0.8s;
        -o-transition: background 0.3s, transform 0.8s;
        transition: background 0.3s, transfrom 0.8s;
    }
    > .spacer {
        -webkit-transition: opacity 0.8s, -webkit-transform 0.8s;
        -moz-transition: opacity 0.8s, -moz-transform 0.8s;
        -ms-transition: opacity 0.8s, transform 0.8s;
        -o-transition: opacity 0.8s, transform 0.8s;
        transition: opacity 0.8s, transfrom 0.8s;
        opacity: 0;
    }
    .left1 > .subwindow {
        .transformtranslate(100%, 0deg, 0.25);
    }
    .left2 > .subwindow {
        .transformtranslate(200%, 0deg, 0.25);
    }
    .left3 > .subwindow {
        .transformtranslate(300%, 0deg, 0.25);
    }

    .right1 > .subwindow {
        .transformtranslate(-100%, 0deg, 0.25);
    }
    .right2 > .subwindow {
        .transformtranslate(-200%, 0deg, 0.25);
    }
    .right3 > .subwindow {
        .transformtranslate(-300%, 0deg, 0.25);
    }

    .scrollEnabled {
        overflow-y: auto;
    }
}
/*
@media screen and (max-aspect-ratio: 3/2) {
    @stretch: 2.2;
    @stretchPer: percentage(@stretch);
    @skewAngle: 35deg;
    @amount-to-right: 0%;
    @subwindow-offset: ((@amount-to-right)*-1);
    #warp {
        .transformtranslate((@amount-to-right),((-1)*@skewAngle), @stretch); //shift left, skew in the reverse of the variable, and stretch by 2
    }
    #one .subwindow {
        .transformtranslaterev((@subwindow-offset), @skewAngle, (1/@stretch));
    }

    #two .subwindow {
        .transformtranslaterev((@subwindow-offset) - 25%, @skewAngle, (1/@stretch));
    }

    #three .subwindow {
        .transformtranslaterev((@subwindow-offset) - 50%, @skewAngle, (1/@stretch));
    }

    #four .subwindow {
        .transformtranslaterev((@subwindow-offset) - 75%, @skewAngle, (1/@stretch));
    }
}
*/

@media screen and (max-aspect-ratio: 1/1) {
    @stretch: 2;
    @stretchPer: percentage(@stretch);
    @skewAngle: 25deg;
    @amount-to-right: 0%;
    @subwindow-offset: ((@amount-to-right)*-1);
    #warp {
        .transformtranslate((@amount-to-right),((-1)*@skewAngle), @stretch); //shift left, skew in the reverse of the variable, and stretch by 2
    }
    #one .subwindow {
        .transformtranslaterev((@subwindow-offset), @skewAngle, (1/@stretch));
    }

    #two .subwindow {
        .transformtranslaterev((@subwindow-offset) - 25%, @skewAngle, (1/@stretch));
    }

    #three .subwindow {
        .transformtranslaterev((@subwindow-offset) - 50%, @skewAngle, (1/@stretch));
    }

    #four .subwindow {
        .transformtranslaterev((@subwindow-offset) - 75%, @skewAngle, (1/@stretch));
    }
}

.clearfix:after {
    content: " ";
    display: block;
    height: 0;
    clear: both;
}
